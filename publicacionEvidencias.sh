#!/bin/bash

echo ""
echo ""
echo "###############################################################################" 
echo "######################## Moviendo evidencias anteriores #######################" 
echo "###############################################################################" 
echo "####################################Éo=&I*?I±©#################################" 
echo "##################################ë&&I%oI&&I=*?Ñ###############################" 
echo "#################################±I&X£±X±£%*=&*%ë##############################" 
echo "################################Ño%X£ë@±ëX£%££&*o¶#############################" 
echo "################################XoX±£@X£Xo±XXXoIoæ#############################" 
echo "################################§&XëÑÑÑ±£o%%&£±oI##############################" 
echo "#################################@&±Ñ§ÑÑ£oo±ë@Ñ£N##############################" 
echo "##################################N@o£X£&%o£££É################################" 
echo "######################################æë£ë§N###################################" 
echo "###############################################################################" 
echo ""
ssh metis@190.248.48.5 'mkdir -p /var/www/metis/atdd/5'
ssh metis@190.248.48.5 'rm -rf /var/www/metis/atdd/5/*'
ssh metis@190.248.48.5 'mv /var/www/metis/atdd/4/* /var/www/metis/atdd/5/'
ssh metis@190.248.48.5 'mkdir -p /var/www/metis/atdd/4'
ssh metis@190.248.48.5 'rm -rf /var/www/metis/atdd/4/*'
ssh metis@190.248.48.5 'mv /var/www/metis/atdd/3/* /var/www/metis/atdd/4/'
ssh metis@190.248.48.5 'mkdir -p /var/www/metis/atdd/3'
ssh metis@190.248.48.5 'rm -rf /var/www/metis/atdd/3/*'
ssh metis@190.248.48.5 'mv /var/www/metis/atdd/2/* /var/www/metis/atdd/3/'
ssh metis@190.248.48.5 'mkdir -p /var/www/metis/atdd/2'
ssh metis@190.248.48.5 'rm -rf /var/www/metis/atdd/2/*'
ssh metis@190.248.48.5 'mv /var/www/metis/atdd/1/* /var/www/metis/atdd/2/'
ssh metis@190.248.48.5 'mkdir -p /var/www/metis/atdd/1'
ssh metis@190.248.48.5 'rm -rf /var/www/metis/atdd/1/*'
ssh metis@190.248.48.5 'mkdir -p /var/www/metis/atdd/1/unitTests'
ssh metis@190.248.48.5 'chmod --recursive a+r /var/www/metis/atdd/*'

echo ""
echo ""
echo "###############################################################################" 
echo "########################## Publicando nuevas evidencias #######################" 
echo "###############################################################################" 
echo "####################################Éo=&I*?I±©#################################" 
echo "##################################ë&&I%oI&&I=*?Ñ###############################" 
echo "#################################±I&X£±X±£%*=&*%ë##############################" 
echo "################################Ño%X£ë@±ëX£%££&*o¶#############################" 
echo "################################XoX±£@X£Xo±XXXoIoæ#############################" 
echo "################################§&XëÑÑÑ±£o%%&£±oI##############################" 
echo "#################################@&±Ñ§ÑÑ£oo±ë@Ñ£N##############################" 
echo "##################################N@o£X£&%o£££É################################" 
echo "######################################æë£ë§N###################################" 
echo "###############################################################################" 
echo ""
echo "put -r metis/automatizacion_base/target/site/serenity/* /var/www/metis/atdd/1/" | sftp metis@190.248.48.5

echo ""
echo ""
echo "###############################################################################" 
echo "########### Formateando archivos de las nuevas evidencias (UTF-8) #############" 
echo "###############################################################################" 
echo "####################################Éo=&I*?I±©#################################" 
echo "##################################ë&&I%oI&&I=*?Ñ###############################" 
echo "#################################±I&X£±X±£%*=&*%ë##############################" 
echo "################################Ño%X£ë@±ëX£%££&*o¶#############################" 
echo "################################XoX±£@X£Xo±XXXoIoæ#############################" 
echo "################################§&XëÑÑÑ±£o%%&£±oI##############################" 
echo "#################################@&±Ñ§ÑÑ£oo±ë@Ñ£N##############################" 
echo "##################################N@o£X£&%o£££É################################" 
echo "######################################æë£ë§N###################################" 
echo "###############################################################################" 
echo ""
ssh metis@190.248.48.5 'convmv -r -f cp1252 -t utf-8 /var/www/metis/atdd/* --notest > /dev/null'

echo ""
echo ""
echo "###############################################################################" 
echo "################# Publicando resultados de prebas unitarias ###################" 
echo "###############################################################################" 
echo "####################################Éo=&I*?I±©#################################" 
echo "##################################ë&&I%oI&&I=*?Ñ###############################" 
echo "#################################±I&X£±X±£%*=&*%ë##############################" 
echo "################################Ño%X£ë@±ëX£%££&*o¶#############################" 
echo "################################XoX±£@X£Xo±XXXoIoæ#############################" 
echo "################################§&XëÑÑÑ±£o%%&£±oI##############################" 
echo "#################################@&±Ñ§ÑÑ£oo±ë@Ñ£N##############################" 
echo "##################################N@o£X£&%o£££É################################" 
echo "######################################æë£ë§N###################################" 
echo "###############################################################################" 
echo ""
echo "put -r 	outPut/* /var/www/metis/atdd/1/unitTests" | sftp metis@190.248.48.5

echo ""
echo ""
echo "###############################################################################" 
echo "################# Enviardo notificador de pruebas unitarias ###################" 
echo "###############################################################################" 
echo "####################################Éo=&I*?I±©#################################" 
echo "##################################ë&&I%oI&&I=*?Ñ###############################" 
echo "#################################±I&X£±X±£%*=&*%ë##############################" 
echo "################################Ño%X£ë@±ëX£%££&*o¶#############################" 
echo "################################XoX±£@X£Xo±XXXoIoæ#############################" 
echo "################################§&XëÑÑÑ±£o%%&£±oI##############################" 
echo "#################################@&±Ñ§ÑÑ£oo±ë@Ñ£N##############################" 
echo "##################################N@o£X£&%o£££É################################" 
echo "######################################æë£ë§N###################################" 
echo "###############################################################################" 
echo ""
echo "put -r 	metis/unitTests/notifierLogs/LogUnitTest.php /var/www/metis/atdd/1" | sftp metis@190.248.48.5
echo "put -r 	metis/automatizacion_base/target/surefire-reports/com.handresc1127.automatizacion.RunnerTags.txt /var/www/metis/atdd/1/unitTests" | sftp metis@190.248.48.5

echo ""
echo ""
echo "###############################################################################" 
echo "############## Notificando por Slack el resultado de pruebas unitarias ########" 
echo "###############################################################################" 
echo "####################################Éo=&I*?I±©#################################" 
echo "##################################ë&&I%oI&&I=*?Ñ###############################" 
echo "#################################±I&X£±X±£%*=&*%ë##############################" 
echo "################################Ño%X£ë@±ëX£%££&*o¶#############################" 
echo "################################XoX±£@X£Xo±XXXoIoæ#############################" 
echo "################################§&XëÑÑÑ±£o%%&£±oI##############################" 
echo "#################################@&±Ñ§ÑÑ£oo±ë@Ñ£N##############################" 
echo "##################################N@o£X£&%o£££É################################" 
echo "######################################æë£ë§N###################################" 
echo "###############################################################################" 
echo ""
wget http://190.248.48.5/metis/atdd/1/LogUnitTest.php?parametro=/var/www/metis/atdd/1/unitTests/tigoselfcare/executionPhpUnit.log&title=Pruebas%20unitarias%20de%20tigoSelfcare
wget http://190.248.48.5/metis/atdd/1/LogUnitTest.php?parametro=/var/www/metis/atdd/1/unitTests/transaccionales-co/executionPhpUnit.log&title=Pruebas%20unitarias%20de%20transaccionales-co
wget http://190.248.48.5/metis/atdd/1/LogUnitTest.php?parametro=/var/www/metis/atdd/1/unitTests/com.handresc1127.automatizacion.RunnerTags.txt&title=Pruebas%20funcionales%20de%20los%20aplicativos